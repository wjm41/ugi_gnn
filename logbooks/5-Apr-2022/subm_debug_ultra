#!/bin/bash
#SBATCH -J D4_debug_ultra
#SBATCH -A LEE-WJM41-SL2-GPU
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --gres=gpu:1
#SBATCH --time=0:10:00
#SBATCH --mail-user=wjm41@cam.ac.uk
#SBATCH --output=/rds-d2/user/wjm41/hpc-work/datasets/Ugis/logbooks/5-Apr-2022/subm_debug_ultra.out
#SBATCH -p ampere
#SBATCH --mail-type=ALL
. /etc/profile.d/modules.sh
module purge
module load rhel8/default-amp
module load miniconda/3
source activate dgl_life
cd /rds-d2/user/wjm41/hpc-work/datasets/Ugis/; pip install .
python -c "from dock2hit.train_and_validate_multithread import main; main()" -path_to_train_data /rds-d2/user/wjm41/hpc-work/datasets/Ugis/datasets/D4_test.csv -batch_size 256 -minibatch_size 64 -random_train_val_split -n_epochs 10000 -save_dir /rds-d2/user/wjm41/hpc-work/models/dock2hit/D4/debug_ultra -log_dir /rds-d2/user/wjm41/hpc-work/datasets/Ugis/runs/ultra-large/D4/ -steps_per_log 100